---

title: How to Install Prometheus and Grafana on Kubernetes with Helm
slug: how-to-install-prometheus-and-grafana-on-kubernetes
date: 2024-07-30
tags: [faq, prometheus]
authors: [ankit_anand]
description: Learn how to install Prometheus and Grafana on Kubernetes using Helm. Follow our step-by-step guide for efficient monitoring and visualization.
keywords: [Kubernetes monitoring, Prometheus installation, Grafana setup, Helm charts, container orchestration, metrics visualization, Kubernetes observability]

---

<head>
<script
  type="application/ld+json"
  dangerouslySetInnerHTML={{ __html: JSON.stringify({
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "How to Install Prometheus and Grafana on Kubernetes with Helm",
    "alternativeHeadline": "Step-by-Step Guide to Install Prometheus and Grafana on Kubernetes Using Helm",
    "author": {
      "@type": "Person",
      "name": "Ankit Anand"
    },
    "publisher": {
      "@type": "Organization",
      "name": "SigNoz",
      "logo": {
        "@type": "ImageObject",
        "url": "https://signoz.io/img/SigNozLogo-orange.svg"
      }
    },
    "datePublished": "2024-07-30T00:00:00Z",
    "dateModified": "2024-07-30T00:00:00Z",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://signoz.io/guides/how-to-install-prometheus-and-grafana-on-kubernetes/"
    },
    "description": "Learn how to install Prometheus and Grafana on Kubernetes using Helm. Follow our step-by-step guide for efficient monitoring and visualization.",
    "keywords": "Kubernetes monitoring, Prometheus installation, Grafana setup, Helm charts, container orchestration, metrics visualization, Kubernetes observability",
    "articleSection": "Technology",
    "inLanguage": "en",
    "isPartOf": {
      "@type": "Blog",
      "name": "SigNoz Blog",
      "url": "https://signoz.io/blog/"
    },
    "about": [
      {
        "@type": "Thing",
        "name": "Kubernetes Monitoring",
        "description": "The process of tracking and analyzing the performance of Kubernetes clusters to ensure optimal performance and reliability."
      },
      {
        "@type": "Thing",
        "name": "Prometheus",
        "description": "An open-source monitoring and alerting toolkit designed for reliability and scalability."
      },
      {
        "@type": "Thing",
        "name": "Grafana",
        "description": "An open-source platform for monitoring and observability, used for visualizing time series data."
      },
      {
        "@type": "Thing",
        "name": "Helm Charts",
        "description": "A package manager for Kubernetes that simplifies the deployment and management of applications."
      }
    ],
    "mentions": [
      {
        "@type": "SoftwareApplication",
        "name": "Prometheus",
        "applicationCategory": "Monitoring Tool"
      },
      {
        "@type": "SoftwareApplication",
        "name": "Grafana",
        "applicationCategory": "Visualization Tool"
      },
      {
        "@type": "SoftwareApplication",
        "name": "Helm",
        "applicationCategory": "Package Manager"
      },
      {
        "@type": "SoftwareApplication",
        "name": "Kubernetes",
        "applicationCategory": "Container Orchestration"
      }
    ],
    "mainEntity": {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What are the system requirements for running Prometheus and Grafana on Kubernetes?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The requirements depend on your cluster size and monitoring needs. Generally, start with at least 2 CPU cores and 4GB RAM for each tool, scaling as necessary."
          }
        },
        {
          "@type": "Question",
          "name": "Can I use Prometheus and Grafana for monitoring non-Kubernetes workloads?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, both tools can monitor various systems. Use exporters to collect metrics from non-Kubernetes sources and visualize them in Grafana."
          }
        },
        {
          "@type": "Question",
          "name": "How do I update Prometheus and Grafana installed via Helm?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Use `helm upgrade` with the latest chart version:\n\n```\nhelm upgrade prometheus prometheus-community/prometheus\nhelm upgrade grafana grafana/grafana\n```\n"
          }
        },
        {
          "@type": "Question",
          "name": "What are some alternatives to Prometheus and Grafana for Kubernetes monitoring?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Alternatives include:\n\n- Datadog\n- Elastic Stack (ELK)\n- New Relic\n- Dynatrace\n- SigNoz"
          }
        }
      ]
    },
    "tutorial": {
      "@type": "HowTo",
      "name": "Installing Prometheus and Grafana on Kubernetes with Helm",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Install Helm",
          "text": "Install Helm by following the official documentation: [Helm Installation Guide](https://helm.sh/docs/intro/install/)"
        },
        {
          "@type": "HowToStep",
          "name": "Add Prometheus Helm repository",
          "text": "Run `helm repo add prometheus-community https://prometheus-community.github.io/helm-charts` and `helm repo update`."
        },
        {
          "@type": "HowToStep",
          "name": "Create Prometheus values file",
          "text": "Create a `prometheus-values.yaml` file with your desired configurations."
        },
        {
          "@type": "HowToStep",
          "name": "Install Prometheus with Helm",
          "text": "Run `helm install prometheus prometheus-community/prometheus -f prometheus-values.yaml`."
        },
        {
          "@type": "HowToStep",
          "name": "Verify Prometheus installation",
          "text": "Run `kubectl get pods -l app=prometheus` to ensure Prometheus pods are running."
        },
        {
          "@type": "HowToStep",
          "name": "Add Grafana Helm repository",
          "text": "Run `helm repo add grafana https://grafana.github.io/helm-charts` and `helm repo update`."
        },
        {
          "@type": "HowToStep",
          "name": "Create Grafana values file",
          "text": "Create a `grafana-values.yaml` file with your desired configurations."
        },
        {
          "@type": "HowToStep",
          "name": "Install Grafana with Helm",
          "text": "Run `helm install grafana grafana/grafana -f grafana-values.yaml`."
        },
        {
          "@type": "HowToStep",
          "name": "Retrieve Grafana admin password",
          "text": "Run `kubectl get secret --namespace default grafana -o jsonpath=\"{.data.admin-password}\" | base64 --decode ; echo`."
        },
        {
          "@type": "HowToStep",
          "name": "Access Grafana dashboard",
          "text": "Use the LoadBalancer IP or port-forwarding to access Grafana: `kubectl port-forward service/grafana 3000:80`."
        },
        {
          "@type": "HowToStep",
          "name": "Add Prometheus data source to Grafana",
          "text": "In Grafana, navigate to Configuration > Data Sources, add a new Prometheus data source, and set the URL to `http://prometheus-server`."
        },
        {
          "@type": "HowToStep",
          "name": "Create API monitoring dashboard",
          "text": "Create a new dashboard in Grafana and add panels for key metrics like request rate, latency, and error rate."
        }
      ]
    }
  }) }}
/>
</head>

Monitoring Kubernetes clusters is crucial for maintaining optimal performance and reliability. Prometheus and Grafana are powerful tools that work together to provide comprehensive monitoring and visualization capabilities. This guide walks you through the process of installing Prometheus and Grafana on Kubernetes using Helm, simplifying deployment and management.

## What are Prometheus and Grafana?

Prometheus is an open-source monitoring and alerting toolkit designed for reliability and scalability. It collects and stores time-series data as metrics, making it ideal for monitoring dynamic container environments. Grafana, on the other hand, is a visualization and analytics platform that transforms this data into insightful dashboards and graphs.

In Kubernetes environments, Prometheus serves as the data collector and storage engine, while Grafana provides the visual interface for analyzing and interpreting the collected metrics. Together, they form a robust monitoring solution that helps you:

- Track resource usage across nodes and pods
- Monitor application performance
- Set up alerts for potential issues
- Visualize complex data patterns

## Why Use Helm for Installing Prometheus and Grafana?

Helm is a package manager for Kubernetes that simplifies the deployment and management of applications. Using Helm Charts for Prometheus and Grafana installation offers several advantages:

1. **Simplified deployment**: Helm packages all necessary Kubernetes resources into a single chart, reducing the complexity of manual installation.
2. **Easy updates**: Helm allows you to update your installations with a single command, ensuring you always have the latest features and security patches.
3. **Customization**: Helm Charts provide a way to customize deployments through values files, allowing you to tailor the installation to your specific needs.
4. **Reproducibility**: Charts ensure consistent deployments across different environments, reducing configuration errors.

Compared to manual installation methods, Helm significantly reduces the time and effort required to set up and maintain Prometheus and Grafana on Kubernetes.

## Prerequisites for Installation

Before you begin the installation process, ensure you have the following prerequisites in place:

1. A running Kubernetes cluster (version 1.19 or later)
2. kubectl configured to communicate with your cluster
3. Helm 3 installed on your local machine
4. Sufficient cluster resources to run Prometheus and Grafana
5. RBAC permissions to create and manage Kubernetes resources

To verify your Kubernetes cluster is ready, run:

```bash
kubectl cluster-info

```

Install Helm by following the official documentation: [Helm Installation Guide](https://helm.sh/docs/intro/install/)

## Step-by-Step Guide to Install Prometheus with Helm

Follow these steps to install Prometheus using Helm:

1. Add the Prometheus community Helm repository:

```bash
helm repo add prometheus-community <https://prometheus-community.github.io/helm-charts>
helm repo update

```

1. Create a values file named `prometheus-values.yaml` to customize the Prometheus installation:

```yaml
server:
  persistentVolume:
    size: 8Gi
alertmanager:
  persistentVolume:
    size: 2Gi

```

1. Install Prometheus using Helm:

```bash
helm install prometheus prometheus-community/prometheus -f prometheus-values.yaml

```

1. Verify the installation:

```bash
kubectl get pods -l app=prometheus

```

You should see pods for Prometheus server, alertmanager, and various exporters running.

### Configuring Prometheus for Kubernetes Monitoring

To effectively monitor your Kubernetes cluster:

1. Set up ServiceMonitor resources for key components:

```yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: kube-state-metrics
  labels:
    release: prometheus
spec:
  selector:
    matchLabels:
      app.kubernetes.io/name: kube-state-metrics
  endpoints:
  - port: http-metrics

```

1. Configure RBAC permissions for Prometheus:

```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: prometheus
rules:
- apiGroups: [""]
  resources:
  - nodes
  - services
  - endpoints
  - pods
  verbs: ["get", "list", "watch"]

```

1. Enable relevant exporters like node-exporter and kube-state-metrics in your Helm values file.

## Installing Grafana on Kubernetes with Helm

To install Grafana:

1. Add the Grafana Helm repository:

```bash
helm repo add grafana <https://grafana.github.io/helm-charts>
helm repo update

```

1. Create a `grafana-values.yaml` file:

```yaml
persistence:
  enabled: true
  size: 5Gi
service:
  type: LoadBalancer

```

1. Install Grafana:

```bash
helm install grafana grafana/grafana -f grafana-values.yaml

```

1. Retrieve the Grafana admin password:

```bash
kubectl get secret --namespace default grafana -o jsonpath="{.data.admin-password}" | base64 --decode ; echo

```

1. Access the Grafana dashboard using the LoadBalancer IP or by port-forwarding:

```bash
kubectl port-forward service/grafana 3000:80

```

### Integrating Grafana with Prometheus

To connect Grafana with Prometheus:

1. Log into Grafana and navigate to Configuration > Data Sources.
2. Add a new Prometheus data source.
3. Set the URL to `http://prometheus-server`.
4. Save and test the connection.

Create basic dashboards or import pre-built ones from the Grafana dashboard repository for quick setup.

## Troubleshooting Common Installation Issues

- **Namespace conflicts**: Ensure you're using unique names for your releases or specify a namespace.
- **Networking issues**: Check your cluster's network policies and ensure proper communication between components.
- **Prometheus scraping problems**: Verify ServiceMonitor configurations and RBAC permissions.
- **Grafana dashboard errors**: Confirm the Prometheus data source is correctly configured and accessible.

## SigNoz: A Comprehensive Alternative

While Grafana and Prometheus are powerful tools, SigNoz offers a more integrated solution for monitoring and visualization. SigNoz provides:

- Built-in dashboards for common metrics
- Easy setup and configuration
- Advanced querying capabilities
- Unified platform for metrics, traces, and logs

To get started with SigNoz:

<GetStartedSigNoz />

SigNoz simplifies the process of querying and visualizing label values, making it an excellent choice for teams looking for a comprehensive monitoring solution.

## Best Practices for Prometheus and Grafana in Production

1. Implement high availability by running multiple replicas of Prometheus and Grafana.
2. Set up alerting rules in Prometheus and configure notification channels in Grafana.
3. Optimize storage by adjusting retention periods and using remote storage solutions for long-term data.
4. Secure your deployments by enabling authentication, using TLS, and following the principle of least privilege for RBAC.

## Key Takeaways

- Prometheus and Grafana provide powerful monitoring capabilities for Kubernetes environments.
- Helm simplifies the installation and management of these tools.
- Proper configuration and integration are crucial for effective monitoring.
- Regular maintenance and updates ensure optimal performance and security.

## FAQs

### What are the system requirements for running Prometheus and Grafana on Kubernetes?

The requirements depend on your cluster size and monitoring needs. Generally, start with at least 2 CPU cores and 4GB RAM for each tool, scaling as necessary.

### Can I use Prometheus and Grafana for monitoring non-Kubernetes workloads?

Yes, both tools can monitor various systems. Use exporters to collect metrics from non-Kubernetes sources and visualize them in Grafana.

### How do I update Prometheus and Grafana installed via Helm?

Use `helm upgrade` with the latest chart version:

```bash
helm upgrade prometheus prometheus-community/prometheus
helm upgrade grafana grafana/grafana

```

### What are some alternatives to Prometheus and Grafana for Kubernetes monitoring?

Alternatives include:

- Datadog
- Elastic Stack (ELK)
- New Relic
- Dynatrace
- SigNoz

## Resources

- [Official Prometheus Documentation](https://prometheus.io/docs/introduction/overview/)
- [Helm Charts Repository for Prometheus and Grafana](https://github.com/prometheus-community/helm-charts)