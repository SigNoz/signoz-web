---

title: Which Database is Used in Prometheus?
slug: which-database-is-used-in-prometheus
date: 2024-07-15
tags: [faq]
authors: [daniel]
description: Prometheus uses its own time-series database (TSDB) for storing data. This TSDB is highly optimized for handling large volumes of time-stamped data.
keywords: [database,prometheus,monitoring]

---

<head>
<script
  type="application/ld+json"
  dangerouslySetInnerHTML={{ __html: JSON.stringify({
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "Which Database is Used in Prometheus?",
    "alternativeHeadline": "Understanding the Time Series Database Used by Prometheus",
    "author": {
      "@type": "Person",
      "name": "Daniel"
    },
    "publisher": {
      "@type": "Organization",
      "name": "SigNoz",
      "logo": {
        "@type": "ImageObject",
        "url": "https://signoz.io/img/SigNozLogo-orange.svg"
      }
    },
    "datePublished": "2024-07-15T00:00:00Z",
    "dateModified": "2024-07-15T00:00:00Z",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://signoz.io/guides/which-database-is-used-in-prometheus/"
    },
    "description": "Prometheus uses its own time-series database (TSDB) for storing data. This TSDB is highly optimized for handling large volumes of time-stamped data.",
    "keywords": "database, prometheus, monitoring",
    "articleSection": "Technology",
    "inLanguage": "en",
    "isPartOf": {
      "@type": "Blog",
      "name": "SigNoz Blog",
      "url": "https://signoz.io/blog/"
    },
    "about": [
      {
        "@type": "Thing",
        "name": "Prometheus",
        "description": "An open-source monitoring and alerting toolkit designed for reliability and scalability."
      },
      {
        "@type": "Thing",
        "name": "Time Series Database",
        "description": "A database optimized for handling time-stamped data."
      },
      {
        "@type": "Thing",
        "name": "Monitoring",
        "description": "The process of observing and checking the behavior and outputs of a system."
      }
    ],
    "mentions": [
      {
        "@type": "SoftwareApplication",
        "name": "Prometheus",
        "applicationCategory": "Monitoring Tool"
      },
      {
        "@type": "SoftwareApplication",
        "name": "InfluxDB",
        "applicationCategory": "Time Series Database"
      },
      {
        "@type": "SoftwareApplication",
        "name": "TimescaleDB",
        "applicationCategory": "Time Series Database"
      }
    ],
    "mainEntity": {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "Which database is used in Prometheus?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Prometheus uses its own specialized Time Series Database (TSDB) for storing and managing time-stamped data. This TSDB is optimized for high-performance data ingestion, efficient storage, and fast querying of time series data, making it ideal for monitoring and alerting systems."
          }
        },
        {
          "@type": "Question",
          "name": "What is Prometheus?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Prometheus is an open-source monitoring and alerting toolkit designed for reliability and scalability. It is primarily used for collecting and storing metrics as time series data."
          }
        },
        {
          "@type": "Question",
          "name": "What is a Time Series Database?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "A time series database (TSDB) is a database optimized for handling time-stamped data, where each data point is associated with a specific timestamp indicating when the measurement or event occurred."
          }
        },
        {
          "@type": "Question",
          "name": "How does the Prometheus TSDB work?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Prometheus TSDB works by ingesting data through sample collection, storing it in memory-mapped chunks, and writing it to a write-ahead log (WAL). The data is then persisted to disk as immutable blocks, ensuring durability and efficient access for queries."
          }
        },
        {
          "@type": "Question",
          "name": "Why does Prometheus use a Time Series Database?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Prometheus uses a TSDB because it is specifically designed to handle the unique requirements of time series data, which is essential for effective monitoring and alerting. The TSDB offers advantages like specialized compression, scalability, performance, durability, and optimized handling of time-ordered data."
          }
        },
        {
          "@type": "Question",
          "name": "What are some alternatives to the Prometheus TSDB?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Some alternatives to the Prometheus TSDB include InfluxDB, TimescaleDB, and other time series databases like Elasticsearch or ClickHouse. These databases offer distinct features and capabilities for handling time series data, making them suitable for various use cases beyond monitoring and alerting."
          }
        },
        {
          "@type": "Question",
          "name": "When should you consider using an alternative time series database?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "You should consider using an alternative time series database when you need long-term storage and analysis, high cardinality handling, advanced analytics, non-metric data storage, or specific requirements like high write throughput or SQL support."
          }
        }
      ]
    },
    "tutorial": {
      "@type": "HowTo",
      "name": "How to Use Prometheus TSDB",
      "step": [
        {
          "@type": "HowToStep",
          "name": "Set Up Prometheus",
          "text": "Download and install Prometheus, then configure it to scrape metrics from your targets."
        },
        {
          "@type": "HowToStep",
          "name": "Configure TSDB Settings",
          "text": "Adjust TSDB settings in the Prometheus configuration file to optimize data storage and query performance."
        },
        {
          "@type": "HowToStep",
          "name": "Monitor Data Ingestion",
          "text": "Ensure that Prometheus is correctly ingesting data by checking the write-ahead log (WAL) and memory-mapped chunks."
        },
        {
          "@type": "HowToStep",
          "name": "Query Data",
          "text": "Use PromQL to query the data stored in the TSDB for monitoring and alerting purposes."
        },
        {
          "@type": "HowToStep",
          "name": "Integrate with Visualization Tools",
          "text": "Integrate Prometheus with visualization tools like Grafana or SigNoz for advanced data visualization and analysis."
        }
      ]
    }
  }) }}
/>
</head>

Prometheus uses its own specialized Time Series Database (TSDB) for storing and managing time-stamped data. This TSDB is optimized for high-performance data ingestion, efficient storage, and fast querying of time series data, making it ideal for monitoring and alerting systems.

## What is Prometheus?

Prometheus is an open-source monitoring and alerting toolkit designed for reliability and scalability. It is primarily used for collecting and storing metrics as time series data. Prometheus is well-suited for monitoring dynamic cloud environments and microservices architectures due to its robust features and flexibility.

## What is a Time Series Database?

A time series database (TSDB) is a database optimized for handling time-stamped data, where each data point is associated with a specific timestamp indicating when the measurement or event occurred. This specialized type of database is designed to efficiently store, retrieve, and analyze data that changes over time.

Time series data consists of numeric values that change over time and are typically collected at regular intervals. TSDBs excel at handling this kind of data efficiently, enabling quick querying and analysis. The primary goal of a TSDB is to manage large volumes of time-stamped data, providing fast and efficient access for monitoring, analysis, and reporting.

## How does the Prometheus TSDB Work?

<Figure src="/img/guides/2024/07/which-database-is-used-in-prometheus-tsdb_(1).webp" alt="Prometheus TSDB" caption="Prometheus TSDB" />


The above architecture diagram highlights the key components of the Prometheus TSDB. Here's an overview of how they work together:

### Data Ingestion

Prometheus TSDB starts by ingesting data, which involves collecting samples from various targets at regular intervals:

1. Sample Collection: Prometheus actively collects samples from various targets (applications, servers, etc.) at regular intervals. Samples are the individual data points representing the values of specific metrics within a time series.

### Data Storage

After data ingestion, Prometheus TSDB stores the collected samples through several stages to ensure durability and efficient access:

1. Write-Ahead Log (WAL) Entry: Upon collection, each scraped sample is initially written to the Write-Ahead Log (WAL). This log serves as a buffer, ensuring that data is safely stored before being fully integrated into the TSDB. The WAL entry mechanism is essential for data durability; even if the system crashes, the WAL contains all the data that hasn't been committed yet, allowing for recovery.
2. Memory-Mapped Chunks: After the samples are logged, they are stored in memory-mapped files called Chunks. These chunks are compressed sets of samples, optimized for both read and write access as the data is directly mapped from the file into memory. Every time you get a sample, you compress it in flight and store the chunk instead of storing the raw samples.
3. Head Block: The most recent samples are kept in an in-memory structure called the head block. This is where new writes happen actively and it provides quick access to the most recent data.
4. Block Storage: Once the head block reaches a certain size or fills up, older chunks are moved to disk as immutable blocks, freeing up memory for incoming samples. This persistence is called Head Compaction. Additionally, blocks on disk are also compacted to optimize storage. Smaller chunks are merged into larger, more compact blocks. This not only frees up memory but also improves query performance by reducing the number of files that need to be read. Each block includes an index for faster data retrieval later.

### Data Persistence

To ensure that data is not lost and can be recovered in case of failures, Prometheus employs several mechanisms for data persistence:

- Disk Storage: The primary mechanism for data persistence in Prometheus is its local disk storage. Blocks are written to disk in a durable format, ensuring data survives restarts and remains available for analysis.
- WAL Replay: In the event of a crash, Prometheus automatically replays the WAL during startup, restoring any unsaved data points and maintaining data consistency.

## Why does Prometheus use a Time Series Database?

Prometheus uses a Time Series Database (TSDB) because it is specifically designed to handle the unique requirements of time series data, which is essential for effective monitoring and alerting. Here are some of the advantages of Prometheus utilizing a TSDB:

1. Storage: TSDBs often employ specialized compression techniques optimized for time series data, significantly reducing storage requirements. Prometheus leverages this through its custom storage format for efficient storage.
2. Scalability: TSDBs are designed to handle massive amounts of metrics data from numerous sources. Prometheus TSDB can be scaled horizontally by adding more nodes to distribute the load, ensuring performance even as your monitoring needs grow. This scalability is essential for monitoring large-scale distributed systems and dynamic environments where the number of targets and metrics can change rapidly.
3. Performance: Time series databases are optimized for high write and query throughput, ensuring quick query response times even for complex queries that involve high cardinality data. This is essential for real-time monitoring and alerting systems, where quick access to accurate data is crucial for maintaining system health and performance. Prometheus uses a TSDB to efficiently store and retrieve metric data from thousands of targets.
4. Durability: TSDBs are designed with durability in mind. They typically use Write-Ahead Logging (WAL) to ensure durability during writes, preventing data loss in case of crashes or failures. 
5. Optimized for Time-Ordered Data: Time series data is inherently sequential, with each data point tied to a specific timestamp. TSDBs are built to store and query data in this chronological order, making them highly efficient for Prometheus's core function of collecting and analyzing metrics over time.

## Alternatives to the Times Series Database

While Prometheus is a popular choice for time series data storage and monitoring, there are several other time series databases (TSDBs) that offer distinct features and capabilities. Here are some notable alternatives to the Prometheus time series database:

### InfluxDB

It is an open-source TSDB designed for high-performance time series data handling. It offers a compelling alternative with its flexible schema, accommodating evolving data structures. Its support for high write and query throughput makes it ideal for scenarios involving massive data ingestion like monitoring, real-time analytics, and IoT applications. It also provides a SQL-like query language called InfluxQL. However, InfluxDB can be resource-intensive, especially with high-cardinality data, and its ecosystem might not be as mature as Prometheus's.

### TimescaleDB

TimescaleDB is a PostgreSQL extension that transforms PostgreSQL into a time series database. It leverages PostgreSQL’s relational database capabilities while providing optimizations for time series data, such as automatic partitioning and efficient compression. TimescaleDB is a good choice for users who need a hybrid relational and time series database. Its support for SQL makes querying familiar for many developers, and its ability to scale horizontally caters to larger workloads. However, the initial setup can be more complex compared to Prometheus, and it might not be as specialized for time-series data as other alternatives.

Below is a comparison table:

| Feature | Prometheus | InfluxDB | TimescaleDB |
| --- | --- | --- | --- |
| Primary Focus | Monitoring and Alerting | Time-series data (metrics, events, logs) | Time-series data, especially complex analytics |
| Data Model | Multi-dimensional (metrics with labels) | Tag-based, with flexible schemas | Relational (PostgreSQL extension), optimized for time-series data |
| Query Language | PromQL | InfluxQL | SQL (with time-series extensions) |
| Scalability | Horizontal scaling through federation | Horizontal scaling, clustering | Horizontal scaling, native PostgreSQL features |
| Storage Engine | Custom-built TSDB | Custom-built TSM engine (InfluxDB 1.x), or Apache Arrow (2.x) | PostgreSQL with time-series optimizations |
| Performance | Fast query response times for monitoring | High write and query performance | Optimized for complex queries and analysis |
| Resource Usage | Low | Moderate to high | Moderate |
| Ecosystem | Mature | Growing | Large |
| Use Cases | System and application monitoring, alerting | IoT, real-time analytics | Business intelligence, analytics, time series data analysis |

## When Should you Consider using an Alternative Time Series Database?

Prometheus' TSDB is excellent for many use cases, but it's not a one-size-fits-all solution. Here are some scenarios where you might consider exploring alternative time-series databases:

1. Long-Term Storage and Analysis

Prometheus is designed for real-time monitoring and alerting with a focus on recent data. Its storage model is optimized for fast writes and recent data retrieval, not for storing vast amounts of historical data or running complex analytical queries across long time spans.

Time-series databases like InfluxDB, and TimescaleDB (built on PostgreSQL) are designed for long-term storage and provide better capabilities for complex queries and analysis of historical data.

1. High Cardinality

High cardinality refers to having a large number of unique time series. Prometheus' performance can be affected by high cardinality, leading to increased memory usage and slower query times.

Databases like InfluxDB or TimescaleDB are better equipped to handle high-cardinality data due to their storage and indexing mechanisms.

1. Advanced Analytics

Prometheus' query language (PromQL) is powerful for operational monitoring, but it might be limited for advanced analytics or machine learning tasks.

If you need to perform complex statistical analysis, forecasting, or anomaly detection on your time-series data, specialized time-series databases like TimescaleDB or dedicated analytics platforms might be a better fit.

4. Non-Metric Data

Prometheus is primarily designed for storing numeric metric data. While it can handle labels (key-value pairs) for metadata, it's not ideal for storing complex, unstructured data associated with time series.

If you need to store and query time-series data along with rich, non-metric information (e.g., logs, events, or other structured data), consider databases like Elasticsearch or MongoDB.

1. Specific Requirements

You may have specific requirements like the below that require an alternative time series database:

- High Write Throughput: Some time-series databases, like QuestDB, are optimized for extremely high ingestion rates, making them suitable for scenarios with massive amounts of incoming data.
- SQL Support: If you have a strong preference for using SQL for querying your time-series data, databases like TimescaleDB or ClickHouse might be a good choice.

## Conclusion

Prometheus stands out as a powerful monitoring and alerting toolkit, leveraging its specialized Time Series Database (TSDB) to handle vast amounts of time-stamped data efficiently. The TSDB's design is optimized for high-performance data ingestion, efficient storage, and fast querying, making it a perfect fit for dynamic cloud environments and microservices architectures.
