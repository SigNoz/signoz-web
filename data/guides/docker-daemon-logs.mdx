---

title: How to Access and Understand Docker Daemon Logs
slug: docker-daemon-logs
date: 2024-07-31
tags: [logging]
authors: [aayush_sharma]
description: Learn how to access, understand, and leverage Docker daemon logs for troubleshooting, security, and optimizing your container infrastructure.
keywords: [docker daemon logs, container management, troubleshooting, log analysis, debugging, docker security, performance optimization]

---

Docker has revolutionized application deployment and management. At its core, the Docker daemon orchestrates container operations. Understanding Docker daemon logs is crucial for effective troubleshooting and maintaining a healthy Docker environment. This guide will walk you through accessing, interpreting, and leveraging Docker daemon logs to optimize your container infrastructure.

## What are Docker Daemon Logs?

The Docker daemon—the background service managing Docker containers—generates logs that provide insights into its operations. These logs are essential for:

- Troubleshooting container issues
- Monitoring system health
- Identifying security concerns
- Optimizing performance

Docker daemon logs differ from container logs. While container logs focus on application-specific output, daemon logs offer a system-wide view of Docker's operations, including:

- Container lifecycle events (creation, start, stop, removal)
- Image operations (pull, build, remove)
- Network configuration changes
- Volume management
- System errors and warnings

## Locating Docker Daemon Logs on Different Systems

The location of Docker daemon logs varies depending on your operating system and Docker installation method. 

### Linux Systems

On older Docker versions and Linux hosts, Docker daemon logs are located at the `/var/log/syslog` or `/var/log/messages` directories. For modern Linux distributions and recent Docker versions, Docker logs are stored in the journal files under `/var/log/journal`. This is because, on most modern Linux distributions using `systemd`, Docker uses the default logging settings, which typically log to the system journal managed by `systemd` (i.e., `journald`). 

On most Linux distributions using systemd, you can access the Docker daemon logs using:

```bash
journalctl -u docker.service
```

For systems not using systemd, check:

```bash
/var/log/docker.log
```

Older systems using SysVinit: 

```bash
/var/log/upstart/docker.log
```

Common Docker Daemon Log Locations on Different Linux Flavours

- Ubuntu: `/var/log/syslog` or `/var/log/messages`
- CentOS: `/var/log/messages`
- Fedora: `/var/log/daemon.log`

To identify the location where Docker logs are stored on your Linux system, you need to check the Docker service file. The Docker service file contains configuration details about how the Docker daemon is started and managed. On systems using `systemd`, this file is typically located at `/lib/systemd/system/docker.service`. 

To see the Docker service file content:

```jsx
cat /lib/systemd/system/docker.service
```

Look for the `ExecStart` line to see how the Docker daemon is being started.

<Figure src="/img/guides/2024/07/docker-daemon-logs-Untitled.webp" alt="Docker Service Details" caption="Docker Service Details" />

From the above screenshot, the `ExecStart` line in the Docker service unit file, specifically `/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock`, indicates that Docker is set up to use socket activation with `systemd`. In this setup, the Docker daemon communicates with `systemd` via the file descriptor passed (`fd://`), and `systemd` handles the activation and monitoring of the Docker service.

As a result, logs generated by the Docker daemon are directed to `systemd's` journald. Journal files are typically binary and not designed for direct human readability. To effectively view the Docker daemon logs captured by `journald`, use the command:

```jsx
journalctl -xu docker.service
```

`journalctl` is a command-line utility for querying and displaying log entries from the systemd journal. The journal is a structured log that stores information about system events, service starts/stops, and errors.

The above command displays and filters the `systemd` journal logs for messages related to the Docker service, including errors.

<Figure src="/img/guides/2024/07/docker-daemon-logs-Untitled%201.webp" alt="Docker daemon logs" caption="Docker daemon logs" />

Non-standard installations might use different locations. Check your Docker configuration file (`/etc/docker/daemon.json`) for custom log paths.

### Windows

Docker daemon (dockerd) logs are stored within the filesystem of the WSL2 VM that Docker Desktop uses:

```bash
%LOCALAPPDATA%\Docker\log\vm\dockerd.log
```

### macOS

On macOS, the Docker Engine itself is not directly supported. However, you can use Docker on macOS through Docker Desktop. 

The Docker daemon logs, tagged as <a href="https://www.notion.so/SRE-Work-Experience-8e305679af0d4c82a93c245f1fdb39c2?pvs=21" rel="noopener noreferrer nofollow" target="_blank">dockerd</a> on macOS, are stored at:

```jsx
~/Library/Containers/com.docker.docker/Data/log/vm/dockerd.log
```

This log file captures events and messages related to the Docker daemon (`dockerd`) running inside the Docker virtual machine (VM) managed by Docker Desktop. It includes information about Docker engine operations, such as container lifecycle events (like creation, start, stop, removal), network configuration, storage management, and general Docker daemon activities.

For logs specific to the `containerd` runtime, which is responsible for managing container lifecycle operations and their runtime environments, they are stored at:

```jsx
~/Library/Containers/com.docker.docker/Data/log/vm/containerd.log
```

This log file includes detailed information about container runtime events, execution events (like starts and exits), image management, and lower-level container operations.

## How to Enable Debugging for More Detailed Logs

To get more detailed information, enable debug mode in the Docker daemon, there are two approaches to achieve it:

Approach 1: Using Without Flag

1. Edit the Docker daemon configuration file:

```bash
sudo nano /etc/docker/daemon.json
```

1. Add or modify the following line:

```json
{
  "debug": true
}
```

1. Restart the Docker daemon:

```bash
sudo systemctl restart docker
```

1. Run the below command to print the logs

```bash
sudo dockerd
```

### Check Debug Mode Status

After resolving the conflict and starting Docker, you can verify that the debug mode is correctly set by using:

```bash
docker info | grep Debug
```

This command will output two lines Debug Mode: false followed by Debug Mode: true.

Approach 2: Using With Flag

```bash
sudo dockerd --debug
```

After running the above command you will get daemon debug logs as output, example logs:

<Figure src="/img/guides/2024/07/docker-daemon-logs-Untitled%202.webp" alt="Untitled" caption="Docker Logs" />

Note: Ensure docker is not running while fetching the daemon logs or it will throw this error:

```bash
failed to start daemon, ensure docker is not running or delete /var/run/docker.pid: process with PID <PID NO> is still running
```

### Disclaimer

Enabling debug mode can significantly increase the volume of log data generated, which might impact system performance and disk usage, especially on production systems. It’s advisable to enable debug logging temporarily or only under specific conditions where detailed diagnostics are necessary.

## Reading and Interpreting Docker Daemon Logs

Docker daemon logs follow a structured format:

```
level=info time="2023-05-09T10:15:30.123456789Z" msg="Container started" container=abc123...
```

Key components:

- Timestamp: When the event occurred
- Log level: Severity of the message (info, warning, error, etc.)
- Message: Description of the event
- Additional metadata: Container ID, image name, etc.

Interpreting Docker daemon logs involves understanding the different types of messages logged and what they indicate about the Docker engine's operation. Here’s a guide to help you read and make sense of Docker daemon logs effectively:

### Log Levels

The Docker daemon logs messages at various levels that indicate the severity or nature of the entries:

- Debug: Detailed diagnostic information useful for debugging. It only appears if debug mode is enabled.
- Info: Routine information showing the operation of the Docker daemon.
- Warning: Indications that something unexpected happened, but the Docker daemon is still working as expected.
- Error: Errors indicate a failure in some operation that the Docker daemon attempted.
- Fatal: Critical problems that cause the Docker daemon to abort.

## Troubleshooting Common Issues Using Daemon Logs

1. Container startup failures:
    - Look for "level=error" messages related to the container ID
    - Check for resource constraints or missing dependencies
2. Network connectivity problems:
    - Search for "network" or "connectivity" in log messages
    - Verify Docker network configurations and firewall rules
3. Resource constraints:
    - Monitor for "out of memory" or "CPU throttling" messages
    - Adjust container resource limits or host system resources
4. Security events:
    - Watch for "unauthorized" or "permission denied" messages
    - Review access controls and user permissions

## Best Practices for Docker Daemon Logging

1. Implement log rotation to manage file sizes:
    - Use [logrotate](https://signoz.io/guides/logrotate-linux/) on Linux systems
    - Configure Docker to use json-file logging driver with max-size and max-file options
2. Secure log files:
    - Set appropriate file permissions (e.g., `chmod 640 /var/log/docker.log`)
    - Use log management tools with access controls
3. Integrate with monitoring systems:
    - Set up alerts for critical events (e.g., daemon crashes, resource exhaustion)
    - Use tools like SigNoz for visualization.
4. Regularly review logs:
    - Schedule routine log audits
    - Look for patterns indicating potential issues or optimization opportunities

## Key Takeaways

- Docker daemon logs provide crucial insights into container operations and system health
- Log locations vary by OS; familiarize yourself with your system's specifics
- Enable debug mode for detailed troubleshooting, but use cautiously in production
- Utilize command-line tools and log aggregation solutions for efficient analysis
- Implement best practices for log management, security, and monitoring

## FAQs

### How often should I check Docker daemon logs?

Regular checks—daily or weekly—help identify issues early. Set up automated monitoring for real-time alerts on critical events.

### Can I change the default location of Docker daemon logs?

Yes, modify the Docker daemon configuration file to specify a custom log path. Ensure the new location has appropriate permissions.

### What's the difference between Docker daemon logs and container logs?

Daemon logs cover system-wide Docker operations, while container logs focus on application-specific output from individual containers.

### How long should I retain Docker daemon logs?

Retention periods depend on your compliance requirements and storage capacity. A common practice is to keep logs for 30-90 days, with longer retention for critical systems.
