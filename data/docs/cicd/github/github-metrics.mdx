---
date: 2025-04-10
id: github-metrics
title: GitHub Metrics
description: Integrate the GitHub Receiver to scrape the metrics and send the data to SigNoz
hide_table_of_contents: true
---

This document contains instructions on how to monitor the GitHub Repos using [GitHub Receiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/githubreceiver/README.md) to scrape metrics using GitHub GraphQL and REST APIs.


## Prerequisites

Access token is required for scraping the metrics which can be generated in 2 ways.

- [Personal Access Token](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#fine-grained-personal-access-tokens)

- [GitHub App](https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app)

## Setup

<Tabs entityName="plans">
<TabItem value="signoz-cloud" label="SigNoz Cloud" default>

### Step 1. Add GitHub OTel Collector Service
Add the `github-otel-collector` service under `services` section of `docker-compose.yaml` file.

    ```yaml:/deploy/docker/docker-compose.yaml 
    ...
    github-otel-collector:
      image: otel/opentelemetry-collector-contrib:0.123.0
      container_name: github-otel-collector
      command: [ "--config=/etc/otel-collector-config.yaml" ]
      volumes:
        - ./github-otel-collector-config.yaml:/etc/otel-collector-config.yaml
      environment:
        - GH_PAT=<Access Token>
      networks:
        - signoz-net
    ...
    ```

### Step 2. Disable the SigNoz OTel Collector Service
Comment the entire lines of `otel-collector` service in `docker-compose.yaml` file.

    ```yaml:/deploy/docker/docker-compose.yaml
    ...
  # otel-collector:
  #   !!merge <<: *db-depend
  #   image: signoz/signoz-otel-collector:${OTELCOL_TAG:-v0.111.38}
  #   container_name: signoz-otel-collector
  #   command:
  #     - --config=/etc/otel-collector-config.yaml
  #     - --manager-config=/etc/manager-config.yaml
  #     - --copy-path=/var/tmp/collector-config.yaml
  #     - --feature-gates=-pkg.translator.prometheus.NormalizeName
  #   volumes:
  #     - ./otel-collector-config.yaml:/etc/otel-collector-config.yaml
  #     - ../common/signoz/otel-collector-opamp-config.yaml:/etc/manager-config.yaml
  #   environment:
  #     - OTEL_RESOURCE_ATTRIBUTES=host.name=signoz-host,os.type=linux
  #     - LOW_CARDINAL_EXCEPTION_GROUPING=false
  #   ports:
  #     # - "1777:1777"     # pprof extension
  #     - "4317:4317" # OTLP gRPC receiver
  #     - "4318:4318" # OTLP HTTP receiver
  #   depends_on:
  #     signoz:
  #       condition: service_healthy
    ...
    ```

### Step 3. Configure SigNoz Cloud Ingestion Key
Create an environment variable called `SIGNOZ_INGESTION_KEY` under `environment` section of `github-otel-collector` service in `docker-compose.yaml` file.

    ```yaml:/deploy/docker/docker-compose.yaml 
    ...
    github-otel-collector:
      environment:
        - SIGNOZ_INGESTION_KEY=<SIGNOZ_INGESTION_KEY>
    ...
    ```

### Step 4. Create GitHub OTel Collector Configuration
Create `github-otel-collector-config.yaml` file and add the following contents.

    ```yaml:/deploy/docker/github-otel-collector-config.yaml 
    ...
    extensions:
      bearertokenauth/github:
        token: ${env:GH_PAT}

    receivers:
      github:
        log_level: debug
        initial_delay: 1s
        collection_interval: 60s
        timeout: 30s
        scrapers:
          scraper:
            github_org: <Your GitHub Org>
            # search_query: ""
            metrics:
              vcs.contributor.count:
                enabled: true
            auth:
              authenticator: bearertokenauth/github

    exporters:
      otlp/signozcloud:
        endpoint: ingest.<region>.signoz.cloud:443
        headers:
          signoz-ingestion-key: ${SIGNOZ_INGESTION_KEY}
        tls:
          insecure: false
        debug:
          verbosity: detailed 

    service:
      extensions: [bearertokenauth/github]
      pipelines:
        metrics:
          receivers: [github]
          processors: []
          exporters: [otlp/signozcloud,debug]
    ...
    ```

### Step 5. Restart GitHub OTel Collector Service
Restart `github-otel-collector` service.

    ```bash
    docker compose -f docker/docker-compose.yaml restart github-otel-collector
    ```

### Step 6. View Logs of GitHub OTel Collector
Run the following command to view the logs.
    
    ```bash
    docker compose -f docker/docker-compose.yaml logs -f github-otel-collector
    ```
    
<Figure src="/img/docs/cicd/github/GitHubReceiver.webp" alt="GitHub Receiver" caption="GitHub Receiver Startup Message" />

</TabItem>

<TabItem value='self-host' label='Self-Host'>

### Step 1. Install SigNoz
Install `SigNoz` by following this [link](https://signoz.io/docs/install/self-host/).

<Admonition>
ðŸ’¡ At the time of writing this guide, the SigNoz OTel Collector does not support the GitHub Receiver.
</Admonition>

### Step 2. Add GitHub OTel Collector Service
Add the `github-otel-collector` service under `services` section of `docker-compose.yaml` file.

    ```yaml:/deploy/docker/docker-compose.yaml 
    ...
    github-otel-collector:
      image: otel/opentelemetry-collector-contrib:0.123.0
      container_name: github-otel-collector
      command: [ "--config=/etc/otel-collector-config.yaml" ]
      volumes:
        - ./github-otel-collector-config.yaml:/etc/otel-collector-config.yaml
      environment:
        - GH_PAT=<Access Token>
      networks:
        - signoz-net
      depends_on:
        - otel-collector
    ...
    ```

### Step 3. Disable Default SigNoz OTel Config Paths
Comment the following lines under `command` section of `otel-collector` service in `docker-compose.yaml` file.

    ```yaml:/deploy/docker/docker-compose.yaml 
    ...
    otel-collector:
      command:
        # - --manager-config=/etc/manager-config.yaml
        # - --copy-path=/var/tmp/collector-config.yaml
    ...
    ```

### Step 4. Create GitHub OTel Collector Configuration
Create `github-otel-collector-config.yaml` file and add the following contents.

    ```yaml:/deploy/docker/github-otel-collector-config.yaml 
    ...
    extensions:
      bearertokenauth/github:
        token: ${env:GH_PAT}

    receivers:
      github:
        log_level: debug
        initial_delay: 1s
        collection_interval: 60s
        timeout: 30s
        scrapers:
          scraper:
            github_org: <Your GitHub Org>
            # search_query: ""
            metrics:
              vcs.contributor.count:
                enabled: true
            auth:
              authenticator: bearertokenauth/github

    exporters:
      otlp:
        endpoint: signoz-otel-collector:4317
        tls:
          insecure: true
        timeout: 30s
      debug:
        verbosity: detailed 

    service:
      extensions: [bearertokenauth/github]
      pipelines:
        metrics:
          receivers: [github]
          processors: []
          exporters: [otlp,debug]
    ...
    ```

### Step 5. Update SigNoz OTel Collector Configuration
Update the existing `otel-collector-config.yaml` file with the following contents.

    ```yaml:/deploy/docker/otel-collector-config.yaml
    ...
    receivers:
      otlp:
        protocols:
          grpc:
            endpoint: 0.0.0.0:4317
          http:
            endpoint: 0.0.0.0:4318
    
    exporters:
      clickhousemetricswrite:
        endpoint: tcp://clickhouse:9000/signoz_metrics
        resource_to_telemetry_conversion:
          enabled: true

    service:
      pipelines:
        metrics:
          receivers: [otlp]
          processors: []
          exporters: [clickhousemetricswrite]
    ...
    ```

### Step 6. Restart OTel Collector Services
Restart the `otel-collector` service and `github-otel-collector` service.

    ```bash
    docker compose -f docker/docker-compose.yaml restart otel-collector
    docker compose -f docker/docker-compose.yaml restart github-otel-collector
    ```

### Step 7. View Logs of GitHub OTel Collector
Run the following command to view the logs.
    
    ```bash
    docker compose -f docker/docker-compose.yaml logs -f github-otel-collector
    ```
    
<Figure src="/img/docs/cicd/github/GitHubReceiver.webp" alt="GitHub Receiver" caption="GitHub Receiver Startup Message" />

</TabItem>
</Tabs>

## Validate Metrics in SigNoz

- The following default metrics are scraped and can be viewed under the `Metrics` tab in the SigNoz UI.

<Figure src="/img/docs/cicd/github/Metrics.webp" alt="GitHub Metrics" caption="Scraped Metrics from GitHub" />

- Refer this [link](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/githubreceiver/documentation.md) for more info on metrics.