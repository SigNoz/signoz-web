---
date: 2024-06-06
title: Monitor HTTP Endpoints
id: monitor-http-endpoints
hide_table_of_contents: true
---

With SigNoz, you can monitor the health of HTTP endpoints and set up alerts in case of HTTP endpoint failure status codes. This guide covers everything from basic setup to creating dashboards and configuring alerts.

<Tabs>

<TabItem value="signoz-cloud" label="SigNoz Cloud" default>

## Basic Setup

### Step 1: Install OpenTelemetry Collector

Install and set up the OpenTelemetry Collector by following the [OpenTelemetry Binary Usage guide](https://signoz.io/docs/tutorial/opentelemetry-binary-usage-in-virtual-machine/).

### Step 2: Configure the HTTP Check Receiver

Add the [httpcheck receiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/httpcheckreceiver/documentation.md) to your OpenTelemetry Collector configuration:

```yaml {2-14}
receivers:
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
      http:
        endpoint: 0.0.0.0:4318
  httpcheck:
    targets:
      - endpoint: http://example.com
        method: GET
    collection_interval: 10s

exporters:
  otlp:
    endpoint: "ingest.{region}.signoz.cloud:443"
    tls:
      insecure: false
    headers:
      "signoz-ingestion-key": "<SIGNOZ_INGESTION_KEY>"
```

Depending on your SigNoz cloud region, use the appropriate ingest endpoint:

| Region | Endpoint |
| --- | --- |
| US |  ingest.us.signoz.cloud:443 |
| IN |  ingest.in.signoz.cloud:443 |
| EU | ingest.eu.signoz.cloud:443 |

### Step 3: Configure the Service Pipeline

Configure the service pipeline to include the httpcheck receiver:

```yaml {4}
service:
    metrics:
      receivers: [otlp, httpcheck]
      processors: [batch]
      exporters: [otlp]
```

### Step 4: Start the Collector

Start the OpenTelemetry Collector to begin collecting HTTP endpoint metrics:

```bash
./otelcol-contrib --config ./config.yaml
```

</TabItem>

<TabItem value='self-host' label='Self-Host'>

## Basic Setup

### Step 1: Install OpenTelemetry Collector

Install and set up the OpenTelemetry Collector by following the [OpenTelemetry Binary Usage guide](https://signoz.io/docs/tutorial/opentelemetry-binary-usage-in-virtual-machine/).

### Step 2: Configure the HTTP Check Receiver

Add the [httpcheck receiver](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/httpcheckreceiver/documentation.md) to your OpenTelemetry Collector configuration:

```yaml {2-12}
receivers:
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
      http:
        endpoint: 0.0.0.0:4318
  httpcheck:
    targets:
      - endpoint: http://example.com
        method: GET
    collection_interval: 10s
```

### Step 3: Configure the Service Pipeline

Configure the service pipeline to include the httpcheck receiver:

```yaml {4}
service:
    metrics:
      receivers: [otlp, httpcheck]
      processors: [batch]
      exporters: [clickhousemetricswrite]
```

### Step 4: Start the Collector

Start the OpenTelemetry Collector to begin collecting HTTP endpoint metrics:

```bash
./otelcol-contrib --config ./config.yaml
```

</TabItem>
</Tabs>

## Understanding HTTP Check Metrics

The HTTP Check Receiver performs synthetic checks against HTTP endpoints by making requests to specified endpoints using the configured method. It generates metrics labeled for each HTTP response status class.

The receiver creates a metric named `httpcheck_status` with value 1 if the check resulted in status_code matching the status_class, otherwise 0.

## Monitoring Multiple Endpoints

You can configure multiple `targets` for the httpcheck receiver to monitor several endpoints simultaneously:

```yaml {3-8}
receivers:
  httpcheck:
    targets:
      - endpoint: http://example.com
        method: GET
      - endpoint: http://my-app.com
        method: GET
    collection_interval: 10s
```

## Multiple Collection Intervals

If you need different collection intervals for different endpoints, create multiple httpcheck receiver instances. Each instance can have its own collection interval and targets:

```yaml {2-18}
receivers:
  httpcheck/rapid:
    targets:
      - endpoint: http://critical-service.com
        method: GET
    collection_interval: 30s
  
  httpcheck/frequent:
    targets:
      - endpoint: http://important-service.com
        method: GET
    collection_interval: 60s
  
  httpcheck/low:
    targets:
      - endpoint: http://background-service.com
        method: GET
    collection_interval: 300s

service:
  metrics:
    receivers: [otlp, httpcheck/rapid, httpcheck/frequent, httpcheck/low]
    processors: [batch]
    exporters: [otlp] # or [clickhousemetricswrite] for self-host
```

**Note:** The receiver name format is `httpcheck` for the base receiver and `httpcheck/{name}` for additional instances. Using `httpchecklow` (without the slash) would return an error.

## Creating Dashboards in SigNoz

Once the collector is running and sending data to SigNoz, you can create dashboards to visualize HTTP endpoint health:

### Step 1: Create a New Dashboard

1. Navigate to your SigNoz account
2. Go to the **Dashboard** tab
3. Click on **New Dashboard** button

<figure data-zoomable align='center'>
    <img src="/img/docs/monitor-http-endpoints/create-new-dashboard.webp" alt="Creating a new dashboard in SigNoz"/>
    <figcaption><i>Creating a new dashboard in SigNoz</i></figcaption>
</figure>

4. Choose **Time Series** chart type for HTTP endpoint monitoring

<figure data-zoomable align='center'>
    <img src="/img/docs/monitor-http-endpoints/time-series-chart.webp" alt="Selecting Time Series chart type"/>
    <figcaption><i>Selecting Time Series chart type for HTTP monitoring</i></figcaption>
</figure>

### Step 2: Configure the Query

1. In the **Query Builder** tab, enter "http" in the metric search
2. You should see `httpcheck_status` and other HTTP-related metrics

<figure data-zoomable align='center'>
    <img src="/img/docs/monitor-http-endpoints/query-builder-metrics.webp" alt="HTTP metrics in Query Builder"/>
    <figcaption><i>HTTP metrics available in Query Builder</i></figcaption>
</figure>

3. Select `httpcheck_status` as your metric
4. Add a **WHERE** clause: `http_status_class = 2xx` to monitor successful responses

<figure data-zoomable align='center'>
    <img src="/img/docs/monitor-http-endpoints/configure-query.webp" alt="Configuring httpcheck_status query"/>
    <figcaption><i>Configuring httpcheck_status query with WHERE clause</i></figcaption>
</figure>

5. You can also filter by specific endpoints using the `http_url` attribute

### Step 3: Visualize Endpoint Health

The resulting chart will show:
- Value of 1 when endpoints are healthy (returning 2xx status codes)
- Value of 0 when endpoints are down or returning error codes
- Different lines for each monitored endpoint

<figure data-zoomable align='center'>
    <img src="/img/docs/monitor-http-endpoints/endpoint-health-chart.webp" alt="HTTP endpoint health visualization"/>
    <figcaption><i>HTTP endpoint health visualization showing status over time</i></figcaption>
</figure>

## Available Metrics

The HTTP Check receiver provides several metrics:

| Metric | Description | Type |
|--------|-------------|------|
| `httpcheck.status` | HTTP response status (1 for matching status class, 0 otherwise) | Sum |
| `httpcheck.duration` | Duration of the HTTP request in milliseconds | Gauge |
| `httpcheck.error` | Number of errors during HTTP checks | Sum |

## Available Attributes

Key attributes for filtering and grouping:

| Attribute | Description | Example Values |
|-----------|-------------|----------------|
| `http.url` | Full HTTP request URL | `http://example.com`, `http://my-app.com/health` |
| `http.status_code` | HTTP response status code | `200`, `404`, `500` |
| `http.method` | HTTP request method | `GET`, `POST`, `PUT` |
| `http.status_class` | HTTP response status class | `2xx`, `4xx`, `5xx` |

## Setting Up Alerts

You can create alerts to get notified when endpoints go down:

### Step 1: Create Alert from Dashboard

1. In your dashboard panel showing HTTP endpoint health, click the dropdown menu
2. Select **Create Alerts**

<figure data-zoomable align='center'>
    <img src="/img/docs/monitor-http-endpoints/create-alert-dropdown.webp" alt="Creating alert from dashboard panel"/>
    <figcaption><i>Creating alert from dashboard panel dropdown</i></figcaption>
</figure>

3. This will take you to the alerts configuration page

### Step 2: Configure Alert Conditions

<figure data-zoomable align='center'>
    <img src="/img/docs/monitor-http-endpoints/alert-configuration.webp" alt="Alert configuration page"/>
    <figcaption><i>Alert configuration page with conditions setup</i></figcaption>
</figure>

Example alert configuration:
```yaml
Query: httpcheck_status{http_status_class="2xx"}
Condition: IS BELOW 1
Duration: 2m
```

This alert will trigger when any endpoint stops returning successful responses (2xx status codes) for more than 2 minutes.

### Step 3: Advanced Alert Examples

**Alert for specific endpoint:**
```
Query: httpcheck_status{http_url="http://critical-service.com",http_status_class="2xx"}
Condition: IS BELOW 1
Duration: 1m
```

**Alert for response time:**
```
Query: httpcheck_duration
Condition: IS ABOVE 5000
Duration: 5m
```

**Alert for error rate:**
```
Query: rate(httpcheck_error[5m])
Condition: IS ABOVE 0.1
Duration: 2m
```

## Understanding the Metrics in SigNoz

When you query `httpcheck_status` with different status classes:

- `http_status_class = 2xx`: Shows 1 for successful responses, 0 for failures
- `http_status_class = 4xx`: Shows 1 for client errors (404, 403, etc.)
- `http_status_class = 5xx`: Shows 1 for server errors (500, 502, etc.)

For comprehensive monitoring, create separate panels for:
1. **Overall Health**: `httpcheck_status{http_status_class="2xx"}`
2. **Response Time**: `httpcheck_duration`
3. **Error Rate**: `rate(httpcheck_error[5m])`

## Best Practices

1. **Set appropriate collection intervals**: Balance between timely detection and resource usage
2. **Monitor multiple status classes**: Track both success (2xx) and error responses (4xx, 5xx)
3. **Use meaningful endpoint names**: Include service names in URLs for easier identification
4. **Set up graduated alerts**: Different urgency levels for different types of failures
5. **Monitor response times**: Set alerts for degraded performance, not just complete failures

## Troubleshooting

**Common Issues:**

- **No metrics appearing**: Check that the httpcheck receiver is included in the metrics pipeline
- **Permission errors**: Ensure the collector has network access to the target endpoints
- **SSL/TLS errors**: Configure appropriate TLS settings for HTTPS endpoints
- **High resource usage**: Reduce collection frequency for non-critical endpoints

## Additional Resources

For a more detailed guide about HTTP endpoint monitoring with OpenTelemetry, refer to our comprehensive blog post: [Health Check Monitoring with OpenTelemetry](https://signoz.io/blog/health-check-monitoring-with-opentelemetry/).