---
title: OpenTelemetry Collector for Docker - Install
id: install
description: Step-by-step guide to install and configure OpenTelemetry Collector for comprehensive Docker observability
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# OpenTelemetry Collector for Docker - Install

## Prerequisites

Before installing the OpenTelemetry Collector, ensure you have:

- Docker Engine 20.10+ installed and running
- SigNoz Cloud account with ingestion key
- Administrative access to the Docker host
- Network connectivity to SigNoz Cloud endpoints

## Get SigNoz Credentials

1. Login to SigNoz Cloud at [https://signoz.io](https://signoz.io)
2. Navigate to Settings â†’ Ingestion Keys
3. Copy your ingestion key and region (e.g., `us`, `eu`, `in`)

You'll need these values for the configuration.

---

## Installation

### Step 1: Create Configuration Directory

```bash
mkdir -p ~/opentelemetry-collector
cd ~/opentelemetry-collector
```

### Step 2: Create Collector Configuration

Create `otel-config.yaml`:

```yaml
receivers:
  # Collect container logs
  filelog:
    include: [/var/lib/docker/containers/*/*-json.log]
    poll_interval: 200ms
    start_at: end
    include_file_name: false
    include_file_path: false
    operators:
      - id: container-parser
        type: container
        format: docker

  # Collect host and container metrics  
  hostmetrics:
    collection_interval: 30s
    scrapers:
      cpu: {}
      memory: {}
      disk: {}
      network: {}
      load: {}
      process: {}

  # Collect Docker daemon metrics
  docker_stats:
    endpoint: unix:///var/run/docker.sock
    collection_interval: 30s
    timeout: 20s

  # Receive application traces and metrics
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
      http:
        endpoint: 0.0.0.0:4318

processors:
  # Batch data for efficiency
  batch:
    timeout: 1s
    send_batch_size: 1024

  # Add resource information
  resourcedetection:
    detectors: [env, system, docker]
    timeout: 5s

  # Prevent memory overuse
  memory_limiter:
    limit_mib: 512
    spike_limit_mib: 128

exporters:
  # Send to SigNoz Cloud
  otlp:
    endpoint: "ingest.<YOUR_REGION>.signoz.cloud:443"
    tls:
      insecure: false
    headers:
      signoz-ingestion-key: "<YOUR_INGESTION_KEY>"

service:
  extensions: []
  pipelines:
    logs:
      receivers: [filelog]
      processors: [memory_limiter, resourcedetection, batch]
      exporters: [otlp]
    metrics:
      receivers: [hostmetrics, docker_stats, otlp]
      processors: [memory_limiter, resourcedetection, batch]
      exporters: [otlp]
    traces:
      receivers: [otlp]
      processors: [memory_limiter, resourcedetection, batch]
      exporters: [otlp]
```

### Step 3: Replace Configuration Values

Update the configuration with your SigNoz credentials:

```bash
# Replace placeholders with your actual values
sed -i 's/<YOUR_REGION>/us/g' otel-config.yaml
sed -i 's/<YOUR_INGESTION_KEY>/your-actual-key-here/g' otel-config.yaml
```

### Step 4: Run the OpenTelemetry Collector

<Tabs>
<TabItem value="linux" label="Linux" default>

```bash
docker run --name opentelemetry-collector \
  --restart unless-stopped \
  --detach \
  --user 0:0 \
  --pid host \
  --network host \
  -v /var/lib/docker/containers:/var/lib/docker/containers:ro \
  -v /var/run/docker.sock:/var/run/docker.sock:ro \
  -v /proc:/hostfs/proc:ro \
  -v /sys:/hostfs/sys:ro \
  -v /:/hostfs:ro \
  -v "$(pwd)/otel-config.yaml":/etc/otelcol-contrib/config.yaml \
  -e HOST_PROC=/hostfs/proc \
  -e HOST_SYS=/hostfs/sys \
  -e HOST_ROOT=/hostfs \
  otel/opentelemetry-collector-contrib:0.130.1
```

</TabItem>
<TabItem value="macos" label="macOS">

```bash
docker run --name opentelemetry-collector \
  --restart unless-stopped \
  --detach \
  --user 0:0 \
  --privileged \
  --pid host \
  -p 4317:4317 -p 4318:4318 \
  -v /var/lib/docker/containers:/var/lib/docker/containers:ro \
  -v /var/run/docker.sock:/var/run/docker.sock:ro \
  -v "$(pwd)/otel-config.yaml":/etc/otelcol-contrib/config.yaml \
  otel/opentelemetry-collector-contrib:0.130.1
```

</TabItem>
<TabItem value="windows" label="Windows">

```bash
docker run --name opentelemetry-collector \
  --restart unless-stopped \
  --detach \
  --user 0:0 \
  --pid host \
  --network host \
  -v /var/lib/docker/containers:/var/lib/docker/containers:ro \
  -v /var/run/docker.sock:/var/run/docker.sock:ro \
  -v /proc:/hostfs/proc:ro \
  -v /sys:/hostfs/sys:ro \
  -v /:/hostfs:ro \
  -v "$(pwd)/otel-config.yaml":/etc/otelcol-contrib/config.yaml \
  -e HOST_PROC=/hostfs/proc \
  -e HOST_SYS=/hostfs/sys \
  -e HOST_ROOT=/hostfs \
  otel/opentelemetry-collector-contrib:0.130.1
```

</TabItem>
</Tabs>

---

## Verification

### Step 1: Check Collector Status

```bash
# Check if container is running
docker ps | grep opentelemetry-collector

# Check collector logs
docker logs opentelemetry-collector
```

Expected output:
```
Everything is ready. Begin running and processing data.
Started watching file /var/lib/docker/containers/...
```

### Step 2: Test Data Collection

Generate some test logs:
```bash
# Create a test container with logs
docker run --rm alpine sh -c 'for i in $(seq 1 10); do echo "Test log entry $i"; sleep 1; done'
```

### Step 3: Verify in SigNoz

1. Open SigNoz Cloud in your browser
2. Navigate to Logs section
3. Filter by service.name = `otelcol-contrib`
4. Look for test log entries from the Alpine container

You should see logs appearing within 30-60 seconds.
