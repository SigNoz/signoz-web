---
date: 2024-07-03
title: Ingestion
id: ingestion
---

## Regional Endpoints

| Region | Endpoint | Port |
|:------:|:---------|:----:|
| US | `https://ingest.us.signoz.cloud` | 443 |
| IN | `https://ingest.in.signoz.cloud` | 443 |
| EU | `https://ingest.eu.signoz.cloud` | 443 |

## Authentication Methods

1. **Recommended:** Using `signoz-access-token`
2. Alternative: Using `basic authorization`

## Important Considerations

- Maximum payload size: 16MB per POST request
- CORS enabled with the following access-control-headers:
  `Keep-Alive, User-Agent, If-Modified-Since, Cache-Control, Content-Type, Authorization, signoz-access-token`
- All payloads must be UTF-8 encoded

## Sending OTLP Data

### Configuring the Endpoint and Protocol

To send OTLP data to SigNoz:

1. Configure your OTLP exporter to use the appropriate endpoint from the [regional endpoint](#regional-endpoints) table.
2. Use port 443 for all OTLP protocols (HTTP & gRPC).

{/* Ask Vibhu - SigNoz Cloud*/}
**Note:** SigNoz Cloud uses a single port (443) for both HTTP and gRPC, unlike the standard ports 4317 (gRPC) and 4318 (HTTP) mentioned in some documentation.

#### For SDKs:
Configuration typically involves setting the `OTEL_EXPORTER_OTLP_ENDPOINT` environment variable. Refer to the SigNoz [instrumentation docs](https://signoz.io/docs/instrumentation/) for language-specific details.

#### For Collector:
When using the OpenTelemetry Collector, configure the `otlp` exporter in your collector configuration file to point to the appropriate SigNoz endpoint.

### Optimizing Batching and Timeout Settings

To ensure successful data transmission:

1. Configure appropriate batch sizes to stay within the 16MB payload limit.
2. Adjust export intervals to prevent timeouts and rejected payloads.

#### For SDKs:
Use these environment variables for configuration for configuring batching:

- Spans: `OTEL_BSP_*`
- Metrics: `OTEL_METRIC_EXPORT_*`
- Logs: `OTEL_BLRP_*`

{/* Increase the default timeout settings for large payloads or slow networks using the `OTEL_EXPORTER_OTLP_TIMEOUT` environment variable. */}

#### For Collector:
Utilize the batch processor to control batch size. Configure it in your collector's configuration file under the `processors` section.

#### Exporter Timeout Settings

Pay close attention to exporter timeout settings. Export requests generally take longer when:
- Payloads are larger
- Networks are slower (higher latency, lower bandwidth)

If your application produces large payloads due to high telemetry volume or long export intervals, you may need to increase the default timeout settings to avoid export errors.

#### For SDKs:
Increase the default timeout settings using the `OTEL_EXPORTER_OTLP_TIMEOUT` environment variable. The value should be set in milliseconds.

Example:
`OTEL_EXPORTER_OTLP_TIMEOUT=30000`. This sets the timeout to 30 seconds.

#### For Collector:
Adjust the timeout settings in the exporter configuration section of your collector configuration file. The exact parameter may vary depending on the exporter used.

Example for OTLP exporter:
```yaml
exporters:
  otlp:
    endpoint: "https://ingest.us.signoz.cloud:443"
    timeout: 30s
```

### Implementing Compression

Enable compression to reduce payload size and minimize the risk of hitting size limits:

- SigNoz supports gzip and zstd compression
- zstd is recommended for better performance when supported by your exporter

#### For SDKs:
Configure compression using the `OTEL_EXPORTER_OTLP_COMPRESSION=gzip` environment variable (or `zstd` if supported).

{/* Ask Vibhu if this is correct*/}
#### For Collector:
gzip is the default compression method. To use zstd, configure it in the `otlpexporter` section of your collector configuration file.

### Configuring Retries

Implement retry mechanisms to handle transient errors and reduce data loss:

#### For SDKs:
- Configuration methods vary by language and SDK
- Some SDKs support environment variables (e.g., Java: `OTEL_EXPERIMENTAL_EXPORTER_OTLP_RETRY_ENABLED=true`)
- Programmatic configuration may be necessary in some cases
- Refer to your specific SDK's documentation for detailed retry configuration options

#### For Collector:
The `otlphttpexporter` and `otlpexporter` retry by default. You can customize retry behavior in the exporter configuration section of your collector configuration file. 

{/* Refer to the exporterhelper documentation for more information. */}
